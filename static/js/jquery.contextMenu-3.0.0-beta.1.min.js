!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ContextMenu=t():e.ContextMenu=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={simple:"",text:"text",textarea:"textarea",checkbox:"checkbox",radio:"radio",select:"select",html:"html",separator:"cm_separator",submenu:"sub"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(7);t.default={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,hideOnSecondTrigger:!1,selectableSubMenu:!1,className:"",classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:$.noop,hide:$.noop,activated:$.noop},callback:null,items:{},build:!1,types:{},determinePosition:a.determinePosition,position:a.position,positionSubmenu:a.positionSubmenu}},function(e,t,n){"use strict";n(3);var a=r(n(4)),o=r(n(0)),i=r(n(10));function r(e){return e&&e.__esModule?e:{default:e}}var s=new a.default,c=function(e,t){s.execute(e,t)};c.getInputValues=function(e,t){return s.getInputValues(e,t)},c.setInputValues=function(e,t){return s.getInputValues(e,t)},c.fromMenu=function(e){return s.html5builder.fromMenu(e)},c.defaults=s.defaults,c.types=s.defaults.types,c.manager=s,c.handle=s.handler,c.operations=s.operations,c.menus=s.menus,c.namespaces=s.namespaces,$.fn.contextMenu=i.default,$.contextMenu=c,e.exports={ContextMenu:a.default,ContextMenuItemTypes:o.default}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=c(n(5)),i=c(n(1)),r=c(n(8)),s=c(n(9));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.html5builder=new r.default,this.defaults=i.default,this.handler=new s.default,this.operations=new o.default,this.namespaces={},this.initialized=!1,this.menus={},this.counter=0}return a(e,[{key:"execute",value:function(e,t){var n=this.normalizeArguments(e,t);switch(e=n.operation,t=n.options,e){case"update":this.update(t);break;case"create":this.create(t);break;case"destroy":this.destroy(t);break;case"html5":this.html5(t);break;default:throw new Error('Unknown operation "'+e+'"')}return this}},{key:"html5",value:function(e){e=this.buildOptions(e);(!("contextMenu"in document.body&&"HTMLMenuItemElement"in window)||"boolean"==typeof e&&!0===e)&&$('menu[type="context"]').each(function(){this.id&&$.contextMenu({selector:"[contextmenu="+this.id+"]",items:$.contextMenu.fromMenu(this)})}).css("display","none")}},{key:"destroy",value:function(e){var t=this,n=void 0;if((e=this.buildOptions(e))._hasContext){var a=e.context;Object.keys(this.menus).forEach(function(e){var o=t.menus[e];return!o||(!$(a).is(o.selector)||((n=$(".context-menu-list").filter(":visible")).length&&n.data().contextMenuRoot.$trigger.is($(o.context).find(o.selector))&&n.trigger("contextmenu:hide",{force:!0}),t.menus[o.ns].$menu&&t.menus[o.ns].$menu.remove(),delete t.menus[o.ns],$(o.context).off(o.ns),!0))})}else e.selector?this.namespaces[e.selector]&&((n=$(".context-menu-list").filter(":visible")).length&&n.data().contextMenuRoot.$trigger.is(e.selector)&&n.trigger("contextmenu:hide",{force:!0}),this.menus[this.namespaces[e.selector]].$menu&&this.menus[this.namespaces[e.selector]].$menu.remove(),delete this.menus[this.namespaces[e.selector]],$(document).off(this.namespaces[e.selector])):($(document).off(".contextMenu .contextMenuAutoHide"),Object.keys(this.menus).forEach(function(e){var n=t.menus[e];$(n.context).off(n.ns)}),this.namespaces={},this.menus={},this.counter=0,this.initialized=!1,$("#context-menu-layer, .context-menu-list").remove());this.handler.$currentTrigger=null}},{key:"create",value:function(e){if(!(e=this.buildOptions(e)).selector)throw new Error("No selector specified");if(e.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+e.selector+'" as it contains a reserved className');if(!e.build&&(!e.items||$.isEmptyObject(e.items)))throw new Error("No Items specified");if(this.counter++,e.ns=".contextMenu"+this.counter,e._hasContext||(this.namespaces[e.selector]=e.ns),this.menus[e.ns]=e,e.trigger||(e.trigger="right"),!this.initialized){var t="click"===e.itemClickEvent?"click.contextMenu":"mouseup.contextMenu",n={"contextmenu:focus.contextMenu":this.handler.focusItem,"contextmenu:blur.contextMenu":this.handler.blurItem,"contextmenu.contextMenu":this.handler.abortevent,"mouseenter.contextMenu":this.handler.itemMouseenter,"mouseleave.contextMenu":this.handler.itemMouseleave};n[t]=this.handler.itemClick,$(document).on({"contextmenu:hide.contextMenu":this.handler.hideMenu,"prevcommand.contextMenu":this.handler.prevItem,"nextcommand.contextMenu":this.handler.nextItem,"contextmenu.contextMenu":this.handler.abortevent,"mouseenter.contextMenu":this.handler.menuMouseenter,"mouseleave.contextMenu":this.handler.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",this.handler.inputClick).on(n,".context-menu-item"),this.initialized=!0}switch(e.context.on("contextmenu"+e.ns,e.selector,e,this.handler.contextmenu),e.trigger){case"hover":e.context.on("mouseenter"+e.ns,e.selector,e,this.handler.mouseenter).on("mouseleave"+e.ns,e.selector,e,this.handler.mouseleave);break;case"left":e.context.on("click"+e.ns,e.selector,e,this.handler.click);break;case"touchstart":e.context.on("touchstart"+e.ns,e.selector,e,this.handler.click)}e.build||this.operations.create(null,e)}},{key:"update",value:function(e){if((e=this.buildOptions(e))._hasContext)this.operations.update(null,$(e.context).data("contextMenu"),$(e.context).data("contextMenuRoot"));else for(var t in this.menus)this.menus.hasOwnProperty(t)&&this.operations.update(null,this.menus[t])}},{key:"buildOptions",value:function(e){"string"==typeof e&&(e={selector:e});var t=$.extend(!0,{manager:this},this.defaults,e);return t.context&&t.context.length?(t.context=$(t.context).first(),t._hasContext=!$(t.context).is($(document))):(t.context=$(document),t._hasContext=!1),t}},{key:"normalizeArguments",value:function(e,t){return"string"!=typeof e&&(t=e,e="create"),"string"==typeof t?t={selector:t}:void 0===t&&(t={}),{operation:e,options:t}}},{key:"setInputValues",value:function(e,t){void 0===t&&(t={}),$.each(e.inputs,function(e,n){switch(n.type){case"text":case"textarea":n.value=t[e]||"";break;case"checkbox":n.selected=!!t[e];break;case"radio":n.selected=(t[n.radio]||"")===n.value;break;case"select":n.selected=t[e]||""}})}},{key:"getInputValues",value:function(e,t){return void 0===t&&(t={}),$.each(e.inputs,function(e,n){switch(n.type){case"text":case"textarea":case"select":t[e]=n.$input.val();break;case"checkbox":t[e]=n.$input.prop("checked");break;case"radio":n.$input.prop("checked")&&(t[n.radio]=n.value)}}),t}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(6)),r=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this}return o(e,[{key:"show",value:function(e,t,n,a){var o=$(this),r={};if($("#context-menu-layer").trigger("mousedown"),t.$trigger=o,!1!==t.events.show.call(o,e,t)){if(t.manager.operations.update.call(o,e,t),t.position.call(o,e,t,n,a),t.zIndex){var s=t.zIndex;"function"==typeof t.zIndex&&(s=t.zIndex.call(o,t)),r.zIndex=i.default.zindex(o)+s}t.manager.operations.layer.call(t.$menu,e,t,r.zIndex),t.$menu.find("ul").css("zIndex",r.zIndex+1),t.$menu.css(r)[t.animation.show](t.animation.duration,function(){o.trigger("contextmenu:visible"),t.manager.operations.activated(e,t),t.events.activated(o,e,t)}),o.data("contextMenu",t).addClass("context-menu-active"),$(document).off("keydown.contextMenu").on("keydown.contextMenu",t,t.manager.handler.key),t.autoHide&&$(document).on("mousemove.contextMenuAutoHide",function(e){var n=o.offset();n.right=n.left+o.outerWidth(),n.bottom=n.top+o.outerHeight(),!t.$layer||t.hovering||e.pageX>=n.left&&e.pageX<=n.right&&e.pageY>=n.top&&e.pageY<=n.bottom||setTimeout(function(){t.hovering||null===t.$menu||void 0===t.$menu||t.$menu.trigger("contextmenu:hide")},50)})}else t.manager.handler.$currentTrigger=null}},{key:"hide",value:function(e,t,n){var o=$(this);if("object"!==(void 0===t?"undefined":a(t))&&o.data("contextMenu"))t=o.data("contextMenu");else if("object"!==(void 0===t?"undefined":a(t)))return;if(n||!t.events||!1!==t.events.hide.call(o,e,t)){if(o.removeData("contextMenu").removeClass("context-menu-active"),t.$layer){setTimeout((i=t.$layer,function(){i.remove()}),10);try{delete t.$layer}catch(e){t.$layer=null}}var i;t.manager.handler.$currentTrigger=null,t.$menu.find("."+t.classNames.hover).trigger("contextmenu:blur"),t.$selected=null,t.$menu.find("."+t.classNames.visible).removeClass(t.classNames.visible),$(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),t.$menu&&t.$menu[t.animation.hide](t.animation.duration,function(){t.build&&(t.$menu.remove(),Object.keys(t).forEach(function(e){switch(e){case"ns":case"selector":case"build":case"trigger":return!0;default:t[e]=void 0;try{delete t[e]}catch(e){}return!0}})),setTimeout(function(){o.trigger("contextmenu:hidden")},10)})}}},{key:"create",value:function(e,t,n){void 0===n&&(n=t),t.$menu=$('<ul class="context-menu-list"></ul>').addClass(t.className||"").data({contextMenu:t,contextMenuRoot:n}),$.each(["callbacks","commands","inputs"],function(e,a){t[a]={},n[a]||(n[a]={})}),n.accesskeys||(n.accesskeys={});function a(e){var t=$("<span></span>");if(e._accesskey)e._beforeAccesskey&&t.append(document.createTextNode(e._beforeAccesskey)),$("<span></span>").addClass("context-menu-accesskey").text(e._accesskey).appendTo(t),e._afterAccesskey&&t.append(document.createTextNode(e._afterAccesskey));else if(e.isHtmlName){if(void 0!==e.accesskey)throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");t.html(e.name)}else t.text(e.name);return t}$.each(t.items,function(o,s){var c=$('<li class="context-menu-item"></li>').addClass(s.className||""),l=null,u=null;if(c.on("click",$.noop),"string"!=typeof s&&"cm_seperator"!==s.type||(s={type:r.default.separator}),s.$node=c.data({contextMenu:t,contextMenuRoot:n,contextMenuKey:o}),void 0!==s.accesskey)for(var d,m=i.default.splitAccesskey(s.accesskey),p=0;d=m[p];p++)if(!n.accesskeys[d]){n.accesskeys[d]=s;var f=s.name.match(new RegExp("^(.*?)("+d+")(.*)$","i"));f&&(s._beforeAccesskey=f[1],s._accesskey=f[2],s._afterAccesskey=f[3]);break}if(s.type&&n.types[s.type])n.types[s.type].call(c,e,s,t,n),$.each([t,n],function(e,n){n.commands[o]=s,!$.isFunction(s.callback)||void 0!==n.callbacks[o]&&void 0!==t.type||(n.callbacks[o]=s.callback)});else{switch(s.type===r.default.separator?c.addClass("context-menu-separator "+n.classNames.notSelectable):s.type===r.default.html?c.addClass("context-menu-html "+n.classNames.notSelectable):s.type&&s.type!==r.default.submenu?(l=$("<label></label>").appendTo(c),a(s).appendTo(l),c.addClass("context-menu-input"),t.hasTypes=!0,$.each([t,n],function(e,t){t.commands[o]=s,t.inputs[o]=s})):s.items&&(s.type=r.default.submenu),s.type){case r.default.separator:break;case r.default.text:u=$('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+o).val(s.value||"").appendTo(l);break;case r.default.textarea:u=$('<textarea name=""></textarea>').attr("name","context-menu-input-"+o).val(s.value||"").appendTo(l),s.height&&u.height(s.height);break;case r.default.checkbox:u=$('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+o).val(s.value||"").prop("checked",!!s.selected).prependTo(l);break;case r.default.radio:u=$('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+s.radio).val(s.value||"").prop("checked",!!s.selected).prependTo(l);break;case r.default.select:u=$('<select name=""></select>').attr("name","context-menu-input-"+o).appendTo(l),s.options&&($.each(s.options,function(e,t){$("<option></option>").val(e).text(t).appendTo(u)}),u.val(s.selected));break;case r.default.submenu:a(s).appendTo(c),s.appendTo=s.$node,c.data("contextMenu",s).addClass("context-menu-submenu"),s.callback=null,"function"==typeof s.items.then?n.manager.operations.processPromises(e,s,n,s.items):n.manager.operations.create(e,s,n);break;case r.default.html:$(s.html).appendTo(c);break;default:$.each([t,n],function(e,n){n.commands[o]=s,!$.isFunction(s.callback)||void 0!==n.callbacks[o]&&void 0!==t.type||(n.callbacks[o]=s.callback)}),a(s).appendTo(c)}s.type&&s.type!==r.default.submenu&&s.type!==r.default.html&&s.type!==r.default.separator&&(u.on("focus",n.manager.handler.focusInput).on("blur",n.manager.handler.blurInput),s.events&&u.on(s.events,t)),s.icon&&($.isFunction(s.icon)?s._icon=s.icon.call(this,e,c,o,s,t,n):"string"==typeof s.icon&&"fa-"===s.icon.substring(0,3)?s._icon=n.classNames.icon+" "+n.classNames.icon+"--fa fa "+s.icon:s._icon=n.classNames.icon+" "+n.classNames.icon+"-"+s.icon,c.addClass(s._icon))}s.$input=u,s.$label=l,c.appendTo(t.$menu),!t.hasTypes&&$.support.eventSelectstart&&c.on("selectstart.disableTextSelect",t.manager.handler.abortevent)}),t.$node||t.$menu.css("display","none").addClass("context-menu-rootMenuData"),t.$menu.appendTo(t.appendTo||document.body)}},{key:"resize",value:function(e,t,n){var a=void 0;t.css({position:"absolute",display:"block"}),t.data("width",(a=t.get(0)).getBoundingClientRect?Math.ceil(a.getBoundingClientRect().width):t.outerWidth()+1),t.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),t.find("> li > ul").each(function(t,n){e.data.manager.operations.resize(e,$(n),!0)}),n||t.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return $(this).data("width")})}},{key:"update",value:function(e,t,n){var a=this;void 0===n&&(n=t).manager.operations.resize(e,t.$menu),t.$menu.children().each(function(o,i){var s=$(i),c=s.data("contextMenuKey"),l=t.items[c],u=$.isFunction(l.disabled)&&l.disabled.call(a,e,c,t,n)||!0===l.disabled;if(s[($.isFunction(l.visible)?l.visible.call(a,e,c,t,n):void 0===l.visible||!0===l.visible)?"show":"hide"](),s[u?"addClass":"removeClass"](n.classNames.disabled),$.isFunction(l.icon)&&(s.removeClass(l._icon),l._icon=l.icon.call(a,e,s,c,l,t,n),s.addClass(l._icon)),l.type)switch(s.find("input, select, textarea").prop("disabled",u),l.type){case r.default.text:case r.default.textarea:l.$input.val(l.value||"");break;case r.default.checkbox:case r.default.radio:l.$input.val(l.value||"").prop("checked",!!l.selected);break;case r.default.select:l.$input.val((0===l.selected?"0":l.selected)||"")}l.$menu&&n.manager.operations.update.call(a,e,l,n)})}},{key:"layer",value:function(e,t,n){var a=$(window),o=t.$layer=$('<div id="context-menu-layer"></div>').css({height:a.height(),width:a.width(),display:"block",position:"fixed","z-index":n,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",t.manager.handler.abortevent).on("mousedown",t.manager.handler.layerClick);return void 0===document.body.style.maxWidth&&o.css({position:"absolute",height:$(document).height()}),o}},{key:"processPromises",value:function(e,t,n,a){t.$node.addClass(n.classNames.iconLoadingClass);function o(t,n,a){void 0!==n.$menu&&n.$menu.is(":visible")&&(t.$node.removeClass(n.classNames.iconLoadingClass),t.items=a,n.manager.operations.create(e,t,n),n.manager.operations.update(e,t,n),n.positionSubmenu.call(t.$node,e,t.$menu))}function i(e,t,n){void 0===n?(n={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"==typeof n&&(n={error:{name:n}}),o(e,t,n)}a.then(function(e,t,n){void 0===n&&i(void 0),o(e,t,n)}.bind(this,t,n),i.bind(this,t,n))}},{key:"activated",value:function(e,t){var n=t.$menu,a=n.offset(),o=$(window).height(),i=$(window).scrollTop(),r=n.height();r>o?n.css({height:o+"px","overflow-x":"hidden","overflow-y":"auto",top:i+"px"}):(a.top<i||a.top+r>i+o)&&n.css({top:"0px"})}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"zindex",value:function(e){for(var t=0,n=e;t=Math.max(t,parseInt(n.css("z-index"),10)||0),(n=n.parent())&&n.length&&!("html body".indexOf(n.prop("nodeName").toLowerCase())>-1););return t}},{key:"splitAccesskey",value:function(e){for(var t,n=e.split(/\s+/),a=[],o=0;t=n[o];o++)t=t.charAt(0).toUpperCase(),a.push(t);return a}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determinePosition=function(e){if($.ui&&$.ui.position)e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var t=this.offset();t.top+=this.outerHeight(),t.left+=this.outerWidth()/2-e.outerWidth()/2,e.css(t)}},t.position=function(e,t,n,a){var o=$(window),i=void 0;if(!n&&!a)return void t.determinePosition.call(this,t.$menu);if("maintain"===n&&"maintain"===a)i=t.$menu.position();else{var r=t.$menu.offsetParent().offset();i={top:a-r.top,left:n-r.left}}var s=o.scrollTop()+o.height(),c=o.scrollLeft()+o.width(),l=t.$menu.outerHeight(),u=t.$menu.outerWidth();i.top+l>s&&(i.top-=l);i.top<0&&(i.top=0);i.left+u>c&&(i.left-=u);i.left<0&&(i.left=0);t.$menu.css(i)},t.positionSubmenu=function(e,t){if(void 0===t)return;if($.ui&&$.ui.position)t.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var n={top:-9,left:this.outerWidth()-5};t.css(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"inputLabel",value:function(e){return e.id&&$('label[for="'+e.id+'"]').val()||e.name}},{key:"fromMenu",value:function(e){var t=$(e),n={};return this.build(n,t.children()),n}},{key:"build",value:function(e,t,n){n||(n=0);var a=this;return t.each(function(){var t=$(this),o=this,i=this.nodeName.toLowerCase(),r=void 0,s=void 0;switch("label"===i&&t.find("input, textarea, select").length&&(r=t.text(),i=(o=(t=t.children().first()).get(0)).nodeName.toLowerCase()),i){case"menu":s={name:t.attr("label"),items:{}},n=a.build(s.items,t.children(),n);break;case"a":case"button":s={name:t.text(),disabled:!!t.attr("disabled"),callback:function(){t.get(0).click()}};break;case"menuitem":case"command":switch(t.attr("type")){case void 0:case"command":case"menuitem":s={name:t.attr("label"),disabled:!!t.attr("disabled"),icon:t.attr("icon"),callback:function(){t.get(0).click()}};break;case"checkbox":s={type:"checkbox",disabled:!!t.attr("disabled"),name:t.attr("label"),selected:!!t.attr("checked")};break;case"radio":s={type:"radio",disabled:!!t.attr("disabled"),name:t.attr("label"),radio:t.attr("radiogroup"),value:t.attr("id"),selected:!!t.attr("checked")};break;default:s=void 0}break;case"hr":s="-------";break;case"input":switch(t.attr("type")){case"text":s={type:"text",name:r||a.inputLabel(o),disabled:!!t.attr("disabled"),value:t.val()};break;case"checkbox":s={type:"checkbox",name:r||a.inputLabel(o),disabled:!!t.attr("disabled"),selected:!!t.attr("checked")};break;case"radio":s={type:"radio",name:r||a.inputLabel(o),disabled:!!t.attr("disabled"),radio:!!t.attr("name"),value:t.val(),selected:!!t.attr("checked")};break;default:s=void 0}break;case"select":s={type:"select",name:r||a.inputLabel(o),disabled:!!t.attr("disabled"),selected:t.val(),options:{}},t.children().each(function(){s.options[this.value]=$(this).text()});break;case"textarea":s={type:"textarea",name:r||a.inputLabel(o),disabled:!!t.attr("disabled"),value:t.val()};break;case"label":break;default:s={type:"html",html:t.clone(!0)}}s&&(e["key"+ ++n]=s)}),n}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(1),r=(a=i,a&&a.__esModule?a:{default:a});var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$currentTrigger=null,this.hoveract={}}return o(e,[{key:"abortevent",value:function(e){e.preventDefault(),e.stopImmediatePropagation()}},{key:"contextmenu",value:function(e){var t=$(e.currentTarget);if(!e.data)throw new Error("No data attached");if("right"===e.data.trigger&&(e.preventDefault(),e.stopImmediatePropagation()),!("right"!==e.data.trigger&&"demand"!==e.data.trigger&&e.originalEvent||!(void 0===e.mouseButton||"left"===e.data.trigger&&0===e.mouseButton||"right"===e.data.trigger&&2===e.mouseButton)||t.hasClass("context-menu-active")||t.hasClass("context-menu-disabled"))){if(e.data.manager.handler.$currentTrigger=t,e.data.build){var n=e.data.build(e,t);if(!1===n)return;if(e.data=$.extend(!0,{},r.default,e.data,n||{}),!e.data.items||$.isEmptyObject(e.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");e.data.$trigger=e.data.manager.handler.$currentTrigger,e.data.manager.operations.create(e,e.data)}var a=!1;for(var o in e.data.items)if(e.data.items.hasOwnProperty(o)){($.isFunction(e.data.items[o].visible)?e.data.items[o].visible.call(t,e,o,e.data,e.data):void 0===e.data.items[o].visible||!0===e.data.items[o].visible)&&(a=!0)}a&&e.data.manager.operations.show.call(t,e,e.data,e.pageX,e.pageY)}}},{key:"click",value:function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).trigger($.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY,originalEvent:e}))}},{key:"mousedown",value:function(e){var t=$(this);e.data.manager.handler.$currentTrigger&&e.data.manager.handler.$currentTrigger.length&&!e.data.manager.handler.$currentTrigger.is(t)&&e.data.manager.handler.$currentTrigger.data("contextMenu").$menu.trigger($.Event("contextmenu",{data:e.data,originalEvent:e})),2===e.button&&(e.data.manager.handler.$currentTrigger=t.data("contextMenuActive",!0))}},{key:"mouseup",value:function(e){var t=$(this);t.data("contextMenuActive")&&e.data.manager.handler.$currentTrigger&&e.data.manager.handler.$currentTrigger.length&&e.data.manager.handler.$currentTrigger.is(t)&&!t.hasClass("context-menu-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),e.data.manager.handler.$currentTrigger=t,t.trigger($.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY,originalEvent:e}))),t.removeData("contextMenuActive")}},{key:"mouseenter",value:function(e){var t=$(this),n=$(e.relatedTarget),a=$(document);n.is(".context-menu-list")||n.closest(".context-menu-list").length||e.data.manager.handler.$currentTrigger&&e.data.manager.handler.$currentTrigger.length||(e.data.manager.handler.hoveract.pageX=e.pageX,e.data.manager.handler.hoveract.pageY=e.pageY,e.data.manager.handler.hoveract.data=e.data,a.on("mousemove.contextMenuShow",e.data.manager.handler.mousemove),e.data.manager.handler.hoveract.timer=setTimeout(function(){e.data.manager.handler.hoveract.timer=null,a.off("mousemove.contextMenuShow"),e.data.manager.handler.$currentTrigger=t,t.trigger($.Event("contextmenu",{data:e.data.manager.handler.hoveract.data,pageX:e.data.manager.handler.hoveract.pageX,pageY:e.data.manager.handler.hoveract.pageY}))},e.data.delay))}},{key:"mousemove",value:function(e){e.data.manager.handler.hoveract.pageX=e.pageX,e.data.manager.handler.hoveract.pageY=e.pageY}},{key:"mouseleave",value:function(e){var t=$(e.relatedTarget);if(!t.is(".context-menu-list")&&!t.closest(".context-menu-list").length){try{clearTimeout(e.data.manager.handler.hoveract.timer)}catch(e){}e.data.manager.handler.hoveract.timer=null}}},{key:"layerClick",value:function(e){var t=$(this).data("contextMenuRoot");if(null===t||void 0===t)throw new Error("No ContextMenuData found");var n=e.button,a=e.pageX,o=e.pageY,i=void 0,r=void 0;e.preventDefault(),setTimeout(function(){var s=$(window),c="left"===t.trigger&&0===n||"right"===t.trigger&&2===n;if(document.elementFromPoint&&t.$layer){if(t.$layer.hide(),(i=document.elementFromPoint(a-s.scrollLeft(),o-s.scrollTop())).isContentEditable){var l=document.createRange(),u=window.getSelection();l.selectNode(i),l.collapse(!0),u.removeAllRanges(),u.addRange(l)}$(i).trigger(e),t.$layer.show()}if(t.hideOnSecondTrigger&&c&&null!==t.$menu&&void 0!==t.$menu)t.$menu.trigger("contextmenu:hide",{data:t,originalEvent:e});else{if(t.reposition&&c)if(document.elementFromPoint){if(t.$trigger.is(i))return void t.position.call(t.$trigger,e,t,a,o)}else{r=t.$trigger.offset();var d=$(window);if(r.top+=d.scrollTop(),r.top<=e.pageY&&(r.left+=d.scrollLeft(),r.left<=e.pageX&&(r.bottom=r.top+t.$trigger.outerHeight(),r.bottom>=e.pageY&&(r.right=r.left+t.$trigger.outerWidth(),r.right>=e.pageX))))return void t.position.call(t.$trigger,e,t,a,o)}i&&c&&t.$trigger.one("contextmenu:hidden",function(){$(i).contextMenu({x:a,y:o,button:n,originalEvent:e})}),null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("contextmenu:hide",{data:t,originalEvent:e})}},50)}},{key:"keyStop",value:function(e,t){t.isInput||e.preventDefault(),e.stopPropagation()}},{key:"key",value:function(e){var t={};e.data.manager.handler.$currentTrigger&&(t=e.data.manager.handler.$currentTrigger.data("contextMenu")||{}),void 0===t.zIndex&&(t.zIndex=0);var n=function e(t){return""!==t.style.zIndex?t.style.zIndex:null!==t.offsetParent&&void 0!==t.offsetParent?e(t.offsetParent):null!==t.parentElement&&void 0!==t.parentElement?e(t.parentElement):void 0}(e.target);if(!(t.$menu&&parseInt(n,10)>parseInt(t.$menu.css("zIndex"),10))){switch(e.keyCode){case 9:case 38:if(e.data.manager.handler.keyStop(e,t),t.isInput){if(9===e.keyCode&&e.shiftKey)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("prevcommand",{data:t,originalEvent:e}));if(38===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault()}else if(9!==e.keyCode||e.shiftKey)return void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("prevcommand",{data:t,originalEvent:e}));break;case 40:if(e.data.manager.handler.keyStop(e,t),!t.isInput)return void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("nextcommand",{data:t,originalEvent:e}));if(9===e.keyCode)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("nextcommand",{data:t,originalEvent:e}));if(40===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault();break;case 37:if(e.data.manager.handler.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("context-menu-root")){var a=t.$selected.parent().parent();return t.$selected.trigger("contextmenu:blur",{data:t,originalEvent:e}),void(t.$selected=a)}break;case 39:if(e.data.manager.handler.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;var o=t.$selected.data("contextMenu")||{};if(o.$menu&&t.$selected.hasClass("context-menu-submenu"))return t.$selected=null,o.$selected=null,void o.$menu.trigger("nextcommand",{data:o,originalEvent:e});break;case 35:case 36:if(t.$selected&&t.$selected.find("input, textarea, select").length)break;(t.$selected&&t.$selected.parent()||t.$menu).children(":not(."+t.classNames.disabled+", ."+t.classNames.notSelectable+")")[36===e.keyCode?"first":"last"]().trigger("contextmenu:focus",{data:t,originalEvent:e}),e.preventDefault();break;case 13:if(e.data.manager.handler.keyStop(e,t),t.isInput){if(t.$selected&&!t.$selected.is("textarea, select"))return void e.preventDefault();break}return void(void 0!==t.$selected&&null!==t.$selected&&t.$selected.trigger("mouseup",{data:t,originalEvent:e}));case 32:case 33:case 34:return void e.data.manager.handler.keyStop(e,t);case 27:return e.data.manager.handler.keyStop(e,t),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("contextmenu:hide",{data:t,originalEvent:e}));default:var i=String.fromCharCode(e.keyCode).toUpperCase();if(t.accesskeys&&t.accesskeys[i])return void t.accesskeys[i].$node.trigger(t.accesskeys[i].$menu?"contextmenu:focus":"mouseup",{data:t,originalEvent:e})}e.stopPropagation(),void 0!==t.$selected&&null!==t.$selected&&t.$selected.trigger(e)}}},{key:"prevItem",value:function(e){e.stopPropagation();var t=$(this).data("contextMenu")||{},n=$(this).data("contextMenuRoot")||{};if(t.$selected){var a=t.$selected;(t=t.$selected.parent().data("contextMenu")||{}).$selected=a}for(var o=t.$menu.children(),i=t.$selected&&t.$selected.prev().length?t.$selected.prev():o.last(),r=i;i.hasClass(n.classNames.disabled)||i.hasClass(n.classNames.notSelectable)||i.is(":hidden");)if((i=i.prev().length?i.prev():o.last()).is(r))return;t.$selected&&n.manager.handler.itemMouseleave.call(t.$selected.get(0),e),n.manager.handler.itemMouseenter.call(i.get(0),e);var s=i.find("input, textarea, select");s.length&&s.focus()}},{key:"nextItem",value:function(e){e.stopPropagation();var t=$(this).data("contextMenu")||{},n=$(this).data("contextMenuRoot")||{};if(t.$selected){var a=t.$selected;(t=t.$selected.parent().data("contextMenu")||{}).$selected=a}for(var o=t.$menu.children(),i=t.$selected&&t.$selected.next().length?t.$selected.next():o.first(),r=i;i.hasClass(n.classNames.disabled)||i.hasClass(n.classNames.notSelectable)||i.is(":hidden");)if((i=i.next().length?i.next():o.first()).is(r))return;t.$selected&&n.manager.handler.itemMouseleave.call(t.$selected.get(0),e),n.manager.handler.itemMouseenter.call(i.get(0),e);var s=i.find("input, textarea, select");s.length&&s.focus()}},{key:"focusInput",value:function(e){var t=$(this).closest(".context-menu-item"),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;o.$selected=a.$selected=t,o.isInput=a.isInput=!0}},{key:"blurInput",value:function(e){var t=$(this).closest(".context-menu-item").data(),n=t.contextMenu;t.contextMenuRoot.isInput=n.isInput=!1}},{key:"menuMouseenter",value:function(e){$(this).data().contextMenuRoot.hovering=!0}},{key:"menuMouseleave",value:function(e){var t=$(this).data().contextMenuRoot;t.$layer&&t.$layer.is(e.relatedTarget)&&(t.hovering=!1)}},{key:"itemMouseenter",value:function(e){var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;o.hovering=!0,e&&o.$layer&&o.$layer.is(e.relatedTarget)&&(e.preventDefault(),e.stopImmediatePropagation());var i=a.$menu?a:o;i.$menu.children("."+o.classNames.hover).trigger("contextmenu:blur",{data:i,originalEvent:e}).children(".hover").trigger("contextmenu:blur",{data:i,originalEvent:e}),t.hasClass(o.classNames.disabled)||t.hasClass(o.classNames.notSelectable)?a.$selected=null:t.trigger("contextmenu:focus",{data:a,originalEvent:e})}},{key:"itemMouseleave",value:function(e){var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;if(o!==a&&o.$layer&&o.$layer.is(e.relatedTarget))return void 0!==o.$selected&&null!==o.$selected&&o.$selected.trigger("contextmenu:blur",{data:o,originalEvent:e}),e.preventDefault(),e.stopImmediatePropagation(),void(o.$selected=a.$selected=a.$node);a&&a.$menu&&a.$menu.hasClass(o.classNames.visible)||t.trigger("contextmenu:blur")}},{key:"itemClick",value:function(e){var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot,i=n.contextMenuKey,r=void 0;if(!(!a.items[i]||t.is("."+o.classNames.disabled+", .context-menu-separator, ."+o.classNames.notSelectable)||t.is(".context-menu-submenu")&&!1===o.selectableSubMenu)){if(e.preventDefault(),e.stopImmediatePropagation(),$.isFunction(a.callbacks[i])&&Object.prototype.hasOwnProperty.call(a.callbacks,i))r=a.callbacks[i];else{if(!$.isFunction(o.callback))return;r=o.callback}!1!==r.call(o.$trigger,e,i,a,o)?o.$menu.trigger("contextmenu:hide"):o.$menu.parent().length&&o.manager.operations.update.call(o.$trigger,e,o)}}},{key:"inputClick",value:function(e){e.stopImmediatePropagation()}},{key:"hideMenu",value:function(e,t){var n=$(this).data("contextMenuRoot");n.manager.operations.hide.call(n.$trigger,e,n,t&&t.force)}},{key:"focusItem",value:function(e){e.stopPropagation();var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;t.hasClass(o.classNames.disabled)||t.hasClass(o.classNames.notSelectable)||(t.addClass([o.classNames.hover,o.classNames.visible].join(" ")).parent().find(".context-menu-item").not(t).removeClass(o.classNames.visible).filter("."+o.classNames.hover).trigger("contextmenu:blur"),a.$selected=o.$selected=t,a.$node&&a.$node.hasClass("context-menu-submenu")&&a.$node.addClass(o.classNames.hover),a.$node&&o.positionSubmenu.call(a.$node,e,a.$menu))}},{key:"blurItem",value:function(e){e.stopPropagation();var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;o.autoHide&&t.removeClass(o.classNames.visible),t.removeClass(o.classNames.hover),a.$selected=null}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this,n=e;if(t.length>0)if(void 0===e)t.first().trigger("contextmenu");else if(void 0!==e.x&&void 0!==e.y)t.first().trigger($.Event("contextmenu",{pageX:e.x,pageY:e.y,mouseButton:e.button}));else if("hide"===e){var a=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;a&&a.trigger("contextmenu:hide")}else"destroy"===e?$.contextMenu("destroy",{context:this}):"update"===e?$.contextMenu("update",{context:this}):$.isPlainObject(e)?(e.context=this,$.contextMenu("create",e)):!0===e?t.removeClass("context-menu-disabled"):!1===e&&t.addClass("context-menu-disabled");else $.each($.contextMenu.menus,function(){this.selector===t.selector&&(n.data=this,$.extend(n.data,{trigger:"demand"}))}),$.contextMenu.handle.contextmenu.call(n.target,n);return this}}])});
//# sourceMappingURL=jquery.contextMenu.min.js.map